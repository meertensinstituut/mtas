<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2018-03-26 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180326" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Multi Tier Annotation Search &#x2013; Corpus Query Language</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>MTAS</h2>
                </div>
                      </div>
        <div class="pull-right">                  <a href="http://www.meertens.knaw.nl/" id="bannerRight">
                                                                                                <img src="images/meertens.png"  alt="Meertens Instituut" width="93" height="104"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="projectVersion">Version: 7.2.1.2-SNAPSHOT
                          <span class="divider">|</span>
                    </li>
                              <li class="">
                    <a href="index.html" title="Mtas">
        Mtas</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Corpus Query Language</li>
                
              
                  <li id="publishDate" class="pull-right">Last Published: 2018-03-26</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Mtas</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="features.html" title="Features">
          <span class="none"></span>
        Features</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="installation.html" title="Getting started">
          <span class="icon-chevron-right"></span>
        Getting started</a>
                  </li>
                                                                                                                                                                                                      
      <li>
  
                          <a href="indexing.html" title="Indexing">
          <span class="icon-chevron-right"></span>
        Indexing</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="search.html" title="Search">
          <span class="icon-chevron-down"></span>
        Search</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="search_configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                                                                                                                                                                                                                                                                            
      <li>
  
                          <a href="search_component.html" title="Component">
          <span class="icon-chevron-down"></span>
        Component</a>
                    <ul class="nav nav-list">
                                                                                                          
      <li>
  
                          <a href="search_component_stats.html" title="Statistics">
          <span class="icon-chevron-right"></span>
        Statistics</a>
                  </li>
                    
      <li>
  
                          <a href="search_component_kwic.html" title="Kwic">
          <span class="none"></span>
        Kwic</a>
            </li>
                    
      <li>
  
                          <a href="search_component_list.html" title="List">
          <span class="none"></span>
        List</a>
            </li>
                    
      <li>
  
                          <a href="search_component_document.html" title="Document">
          <span class="none"></span>
        Document</a>
            </li>
                    
      <li>
  
                          <a href="search_component_termvector.html" title="Termvector">
          <span class="none"></span>
        Termvector</a>
            </li>
                    
      <li>
  
                          <a href="search_component_facet.html" title="Facet">
          <span class="none"></span>
        Facet</a>
            </li>
                    
      <li>
  
                          <a href="search_component_group.html" title="Group">
          <span class="none"></span>
        Group</a>
            </li>
                    
      <li>
  
                          <a href="search_component_prefix.html" title="Prefix">
          <span class="none"></span>
        Prefix</a>
            </li>
                    
      <li>
  
                          <a href="search_component_collection.html" title="Collection">
          <span class="none"></span>
        Collection</a>
            </li>
              </ul>
        </li>
                                                                                  
      <li>
  
                          <a href="search_parser.html" title="Parser">
          <span class="icon-chevron-down"></span>
        Parser</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="search_parser_cql.html" title="CQL query">
          <span class="none"></span>
        CQL query</a>
            </li>
                    
      <li>
  
                          <a href="search_parser_join.html" title="Join query">
          <span class="none"></span>
        Join query</a>
            </li>
              </ul>
        </li>
                    
      <li>
  
                          <a href="search_handler.html" title="Handler">
          <span class="none"></span>
        Handler</a>
            </li>
                    
      <li>
  
                          <a href="search_stats.html" title="Type of statistics">
          <span class="none"></span>
        Type of statistics</a>
            </li>
                    
      <li>
  
                          <a href="search_functions.html" title="Functions">
          <span class="none"></span>
        Functions</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>CQL</a>
          </li>
                    
      <li>
  
                          <a href="search_sharding.html" title="Sharding">
          <span class="none"></span>
        Sharding</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="download.html" title="Download">
          <span class="none"></span>
        Download</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                              
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                          
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Corpus Query Language</h1>
<p>Within Lucene and Solr, each field containing tokenized text can be considered as a set of tokens, where each token is associated with a position and its value can be seen as a word from the original text. Mtas extends this concept by allowing to associate multiple positions with one token and by associating each token with a prefix and optional postfix instead of the single value. This makes it possible to use multiple tokens on the same position, and distinguish annotations by using a unique prefix for each type, and allows structures like sentences, paragraphs or entities consisting of multiple adjacent or non-adjacent positions.</p>
<p>To describe sets of tokens matching some condition, a query language is needed. Mtas supports CQL based on the Corpus Query Language introduced by the <a class="externalLink" href="http://cwb.sourceforge.net/files/CQP_Tutorial/">Corpus WorkBench</a> and supported by the Lexicom <a class="externalLink" href="http://www.sketchengine.co.uk/documentation/wiki/SkE/CorpusQuerying">Sketch Engine</a>.</p>
<p><a name="prefix"></a></p>
<div class="section">
<div class="section">
<div class="section">
<h4><a name="Prefix"></a>Prefix</h4>
<p>For each field containing Mtas tokenized text, every token is associated with a prefix. Within the field, only a limited set of prefixes is used to distinguish between the different types of annotation. By using a <a href="search_component_prefix.html">prefix query</a> a full list of used prefixes can be produced.</p>
<p><a name="value"></a></p></div>
<div class="section">
<h4><a name="Value"></a>Value</h4>
<p>The optional postfix associated with a token can be queried within CQL by providing a <i>value</i>. This is a regular expression, the supported syntax is documented in the RegExp class provided by Lucene. By using a <a href="search_component_termvector.html">termvector query</a>, for each <a href="#prefix">prefix</a> a list of postfix values can be produced. </p>
<p><a name="variable"></a></p></div>
<div class="section">
<h4><a name="Variable"></a>Variable</h4>
<p>The optional postfix associated with a token can also be queried within CQL by providing a <i>variable</i>. Each variable may occur only once in a CQL query, and should be provided as a comma separated list together with this query. Each provided variable has to occur in the query.</p>
<p><a name="cql"></a></p></div></div></div>
<div class="section">
<h2><a name="CQL"></a>CQL</h2>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Syntax </th>
      
<th>Description </th>
      
<th>Example </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td><a href="#token">token</a> </td>
      
<td>Matches a single position token </td>
      
<td><tt>[t=&quot;de&quot;]</tt> </td>
    </tr>
    
<tr class="a">
      
<td><a href="#multi-position">multi-position</a> </td>
      
<td>Matches a (single or) multi position token </td>
      
<td><tt>&lt;s/&gt;</tt> </td>
    </tr>
    
<tr class="b">
      
<td><a href="#sequence">sequence</a> </td>
      
<td>Matches a sequence </td>
      
<td><tt>[pos=&quot;ADJ&quot;]{2}[pos=&quot;N&quot;]</tt> </td>
    </tr>
  </tbody>
</table>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Syntax </th>
      
<th>Description </th>
      
<th>Example </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td><a href="#cql">cql</a> <b>{</b> &lt;number&gt; <b>}</b> </td>
      
<td>Matches provided number of occurrence from <a href="#cql">cql</a></td>
      
<td><tt>[pos=&quot;ADJ&quot;]{2}</tt> </td>
    </tr>
    
<tr class="a">
      
<td><a href="#cql">cql</a> <b>{</b> &lt;number&gt; , &lt;number&gt;<b>}</b> </td>
      
<td>Matches each number between provided start and end of occurrence from <a href="#cql">cql</a></td>
      
<td><tt>[pos=&quot;ADJ&quot;]{2,3}</tt> </td>
    </tr>
  </tbody>
</table>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Syntax </th>
      
<th>Description </th>
      
<th>Example </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td><b>(</b> <a href="#cql">cql</a> <b>) within (</b> <a href="#cql">cql</a> <b>)</b> </td>
      
<td>Matches CQL expression within another CQL expression </td>
      
<td><tt>([t=&quot;de&quot;]) within (&lt;s/&gt;)</tt> </td>
    </tr>
    
<tr class="a">
      
<td><b>(</b> <a href="#cql">cql</a> <b>) !within (</b> <a href="#cql">cql</a> <b>)</b> </td>
      
<td>Matches CQL expression not within another CQL expression </td>
      
<td><tt>([t=&quot;de&quot;]) !within (&lt;s/&gt;)</tt> </td>
    </tr>
    
<tr class="b">
      
<td><b>(</b> <a href="#cql">cql</a> <b>) containing (</b> <a href="#cql">cql</a> <b>)</b> </td>
      
<td>Matches CQL expression containing another CQL expression </td>
      
<td><tt>(&lt;s/&gt;) containing ([t=&quot;de&quot;])</tt> </td>
    </tr>
    
<tr class="a">
      
<td><b>(</b> <a href="#cql">cql</a> <b>) !containing (</b> <a href="#cql">cql</a> <b>)</b> </td>
      
<td>Matches CQL expression not containing another CQL expression </td>
      
<td><tt>(&lt;s/&gt;) !containing ([t=&quot;de&quot;])</tt> </td>
    </tr>
    
<tr class="b">
      
<td><b>(</b> <a href="#cql">cql</a> <b>) intersecting (</b> <a href="#cql">cql</a> <b>)</b> </td>
      
<td>Matches CQL expression intersecting another CQL expression </td>
      
<td><tt>(&lt;s/&gt;) intersecting (&lt;div/&gt;)</tt> </td>
    </tr>
    
<tr class="a">
      
<td><b>(</b> <a href="#cql">cql</a> <b>) !intersecting (</b> <a href="#cql">cql</a> <b>)</b> </td>
      
<td>Matches CQL expression not intersecting another CQL expression </td>
      
<td><tt>(&lt;s/&gt;) !intersecting (&lt;div/&gt;)</tt> </td>
    </tr>
    
<tr class="b">
      
<td><b>(</b> <a href="#cql">cql</a> <b>) fullyalignedwith (</b> <a href="#cql">cql</a> <b>)</b> </td>
      
<td>Matches CQL expression fully aligned with another CQL expression </td>
      
<td><tt>(&lt;s/&gt;) fullyalignedwith (&lt;div/&gt;)</tt> </td>
    </tr>
    
<tr class="a">
      
<td><b>(</b> <a href="#cql">cql</a> <b>) !fullyalignedwith (</b> <a href="#cql">cql</a> <b>)</b> </td>
      
<td>Matches CQL expression not fully aligned with another CQL expression </td>
      
<td><tt>(&lt;s/&gt;) !fullyalignedwith (&lt;div/&gt;)</tt> </td>
    </tr>
    
<tr class="b">
      
<td><b>(</b> <a href="#cql">cql</a> <b>) followedby (</b> <a href="#cql">cql</a> <b>)</b> </td>
      
<td>Matches CQL expression followed by another CQL expression </td>
      
<td><tt>([t=&quot;de&quot;]) followedby ([pos=&quot;ADJ&quot;])</tt> </td>
    </tr>
    
<tr class="a">
      
<td><b>(</b> <a href="#cql">cql</a> <b>) !followedby (</b> <a href="#cql">cql</a> <b>)</b> </td>
      
<td>Matches CQL expression not followed by another CQL expression </td>
      
<td><tt>([t=&quot;de&quot;]) !followedby ([pos=&quot;ADJ&quot;])</tt> </td>
    </tr>
    
<tr class="b">
      
<td><b>(</b> <a href="#cql">cql</a> <b>) precededby (</b> <a href="#cql">cql</a> <b>)</b> </td>
      
<td>Matches CQL expression preceded by another CQL expression </td>
      
<td><tt>([pos=&quot;ADJ&quot;]) precededby ([t=&quot;de&quot;])</tt> </td>
    </tr>
    
<tr class="a">
      
<td><b>(</b> <a href="#cql">cql</a> <b>) !precededby (</b> <a href="#cql">cql</a> <b>)</b> </td>
      
<td>Matches CQL expression not preceded by another CQL expression </td>
      
<td><tt>([pos=&quot;ADJ&quot;]) !precededby ([t=&quot;de&quot;])</tt> </td>
    </tr>
  </tbody>
</table>
<p><a name="token"></a></p></div>
<div class="section">
<h2><a name="Token"></a>Token</h2>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Syntax </th>
      
<th>Description </th>
      
<th>Example </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td><b>[ ]</b> </td>
      
<td>Matches each single position token </td>
      
<td><tt>[]</tt> </td>
    </tr>
    
<tr class="a">
      
<td><b>&quot;</b> <a href="#value">value</a> <b>&quot;</b> </td>
      
<td>Matches a single position token with condition defined by a basic <a href="#single-position-expression">single-position-expression</a>, where the prefix is the default prefix provided with the query </td>
      
<td><tt>&quot;de&quot;</tt> </td>
    </tr>
    
<tr class="b">
      
<td><b>[</b> <a href="#single-position-expression">single-position-expression</a> <b>]</b> </td>
      
<td>Matches single position token with condition defined by an <a href="#single-position-expression">single-position-expression</a> </td>
      
<td><tt>[t=&quot;de&quot;]</tt> </td>
    </tr>
  </tbody>
</table>
<p><a name="single-position-expression"></a></p>
<div class="section">
<div class="section">
<h4><a name="Single_Position_Expression"></a>Single Position Expression</h4>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Expression </th>
      
<th>Syntax </th>
      
<th>Example </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>basic </td>
      
<td><a href="#prefix">prefix</a> <b>= &quot;</b><a href="#value">value</a><b>&quot;</b> </td>
      
<td><tt>t=&quot;de&quot;</tt></td>
    </tr>
    
<tr class="a">
      
<td>variable </td>
      
<td><a href="#prefix">prefix</a> <b>= $</b>[variable-name] </td>
      
<td><tt>t=$1</tt></td>
    </tr>
    
<tr class="b">
      
<td>not </td>
      
<td><b>!</b> <a href="#single-position-expression">single-position-expression</a> </td>
      
<td><tt>!t=&quot;de&quot;</tt> </td>
    </tr>
    
<tr class="a">
      
<td>and </td>
      
<td><b>(</b> <a href="#single-position-expression">single-position-expression</a> <b>&amp;</b> <a href="#single-position-expression">single-position-expression</a> <b>&amp;</b> &#x2026; <b>)</b> </td>
      
<td><tt>t=&quot;de&quot; &amp; pos=&quot;LID&quot;</tt></td>
    </tr>
    
<tr class="b">
      
<td>or </td>
      
<td><b>(</b> <a href="#single-position-expression">single-position-expression</a> <b>|</b> <a href="#single-position-expression">single-position-expression</a> <b>|</b> &#x2026; <b>)</b> </td>
      
<td><tt>t=&quot;de&quot; | t=&quot;het&quot;</tt> </td>
    </tr>
    
<tr class="a">
      
<td>position </td>
      
<td><b>#</b> &lt;position&gt; </td>
      
<td><tt>#100</tt> </td>
    </tr>
    
<tr class="b">
      
<td>range </td>
      
<td><b>#</b> &lt;position&gt; <b>-</b> &lt;position&gt; </td>
      
<td><tt>#100-110</tt> </td>
    </tr>
  </tbody>
</table>
<p><a name="multi-position"></a></p></div></div></div>
<div class="section">
<h2><a name="Multi-position"></a>Multi-position</h2>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Syntax </th>
      
<th>Description </th>
      
<th>Example </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td><b>&lt;</b> <a href="#multi-position-expression">multi-position-expression</a> <b>/&gt;</b> </td>
      
<td>Matches (single and) multi position tokens with condition defined by <a href="#multi-position-expression">multi-position-expression</a> </td>
      
<td><tt>&lt;s/&gt;</tt> </td>
    </tr>
    
<tr class="a">
      
<td><b>&lt;</b> <a href="#multi-position-expression">multi-position-expression</a> <b>&gt;</b> </td>
      
<td>Matches start of (single and) multi position tokens with condition defined by <a href="#multi-position-expression">multi-position-expression</a> </td>
      
<td><tt>&lt;s&gt;</tt> </td>
    </tr>
    
<tr class="b">
      
<td><b>&lt;/</b> <a href="#multi-position-expression">multi-position-expression</a> <b>&gt;</b> </td>
      
<td>Matches end of (single and) multi position tokens with condition defined by <a href="#multi-position-expression">multi-position-expression</a> </td>
      
<td><tt>&lt;/s&gt;</tt> </td>
    </tr>
  </tbody>
</table>
<p><a name="multi-position-expression"></a></p>
<div class="section">
<div class="section">
<h4><a name="Multi_Position_Expression"></a>Multi Position Expression</h4>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Expression </th>
      
<th>Syntax </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>prefix </td>
      
<td><a href="#prefix">prefix</a> </td>
    </tr>
    
<tr class="a">
      
<td>basic </td>
      
<td><a href="#prefix">prefix</a> <b>= &quot;</b><a href="#value">value</a><b>&quot;</b> </td>
    </tr>
  </tbody>
</table>
<p><a name="sequence"></a></p></div></div></div>
<div class="section">
<h2><a name="Sequence"></a>Sequence</h2>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Syntax </th>
      
<th>Description </th>
      
<th>Example </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td><a href="#cql">cql</a> <a href="#cql">cql</a> <a href="#cql">cql</a>&#x2026; </td>
      
<td>A sequence of <a href="#cql">cql</a> </td>
      
<td><tt>[t=&quot;de&quot;][pos=&quot;ADJ&quot;]{2}[pos=&quot;N&quot;]</tt> </td>
    </tr>
  </tbody>
</table></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2018
                        <a href="http://www.meertens.knaw.nl/">Meertens Institute</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
